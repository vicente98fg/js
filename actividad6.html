<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>

<button onclick="diceThrow(6)">Tira un D6</button> <br>
<button onclick="createRPGCharacter(firstRace)">Generar el array de stats</button> <br>
<button onclick="getDamages(createRPGCharacter(firstRace))">Damages</button>
<button onclick="getDefense(createRPGCharacter(firstRace))">Defensa</button>
<button onclick="stats1(createRPGCharacter(firstRace))">Juntar stats</button>
<button onclick="stats2(createRPGCharacter(secondRace))">Juntar stats 2</button> <br>
<button onclick="simulateBattle(createRPGCharacter(firstRace,secondRace))">Batalla</button>

<script type="text/javascript">


// Tirada inicial

function diceThrow(dado) {

    let tirada = Math.floor((Math.random() * dado) + 1);
    return tirada;

}


//Seleccion de raza y atributos

var firstRace = prompt("Introduzca raza del primer jugador: Human, Elven, Dwarf, Mage");
var secondRace = prompt("Introduzca raza del segundo jugador: Human, Elven, Dwarf, Mage");

function createRPGCharacter(firstRace) {

    if (firstRace == 'Human' || secondRace == 'Human') {

        var randSTR = 8 + diceThrow(6) + diceThrow(6);
        var randSPE = 4 + diceThrow(6);
        var randVIT = diceThrow(20);
        var randDEX = diceThrow(20);
        var randMAG = diceThrow(10);

        let arraySTATS = [randSTR,randSPE,randVIT,randDEX,randMAG];
        //console.log(arraySTATS);

        return arraySTATS;

    } else if (firstRace == 'Elven' || secondRace == 'Elven') {

        var randSTR = 6 + diceThrow(6) + diceThrow(6);
        var randSPE = diceThrow(20);
        var randVIT = diceThrow(12);
        var randDEX = 3 + diceThrow(10) + diceThrow(10);;
        var randMAG = diceThrow(20);

        let arraySTATS = [randSTR,randSPE,randVIT,randDEX,randMAG];
        //console.log(arraySTATS);

        return arraySTATS;

    } else if (firstRace == 'Dwarf' || secondRace == 'Dwarf') {

        var randSTR = 10 + diceThrow(10);
        var randSPE = diceThrow(8) + diceThrow(8);;
        var randVIT = 10 + diceThrow(8);
        var randDEX = diceThrow(20);
        var randMAG = diceThrow(8);

        let arraySTATS = [randSTR,randSPE,randVIT,randDEX,randMAG];
        //console.log(arraySTATS);

        return arraySTATS;

    } else if (firstRace == 'Mage' || secondRace == 'Mage') {

        var randSTR = diceThrow(6);
        var randSPE = diceThrow(20); 
        var randVIT = diceThrow(10);
        var randDEX = diceThrow(20);
        var randMAG = 12 + diceThrow(8);

        let arraySTATS = [randSTR,randSPE,randVIT,randDEX,randMAG];
        //console.log(arraySTATS);

        return arraySTATS;

    } else {

        console.log('Tu lo que eres es un Troll');

    }
}


//Get los damages

function getDamages(arraySTATS) {

    if (firstRace == 'Human' || secondRace == 'Human') {

        let damSTR = arraySTATS[0];
        let damDEX = arraySTATS[3];

        let damages = Math.round((1.5 * damSTR) + (0.4 * damDEX));
        //console.log(damages);

        return damages;

    } else if (firstRace == 'Elven' || secondRace == 'Elven') {

        let damDEX = arraySTATS[3];
        let damMAG = arraySTATS[4];

        let damages = Math.round((1.2 * damDEX) + (0.1 * damMAG));
        //console.log(damages);

        return damages;

    } else if (firstRace == 'Dwarf' || secondRace == 'Dwarf') {

        let damSTR = arraySTATS[0];

        let damages = Math.round(2 * damSTR);
        //console.log(damages);

        return damages;

    } else if (firstRace == 'Mage' || secondRace == 'Mage') {

        let damDEX = arraySTATS[3];
        let damMAG = arraySTATS[4];

        let damages = Math.round((0.1 * damDEX) + (2 * damMAG));
        //console.log(damages);

        return damages;

    } else {

        console.log('El daño que tienes va a ser el guantazo que te voy a dar');

    }
}


//Get las defensas

function getDefense(arraySTATS) {

    if (firstRace == 'Human' || secondRace == 'Human') {

        let defVIT = arraySTATS[2];
        let defSPE = arraySTATS[1];

        let defense = Math.round(defVIT + (0.2 * defSPE));
        //console.log(defense);

        return defense;

    } else if (firstRace == 'Elven' || secondRace == 'Elven') {

        let defVIT = arraySTATS[2];
        let defSPE = arraySTATS[1];

        let defense = Math.round((0.5 * defVIT) + (1.3 * defSPE));
        //console.log(defense);

        return defense;

    } else if (firstRace == 'Dwarf' || secondRace == 'Dwarf') {

        let defVIT = arraySTATS[2];
        let defSTR = arraySTATS[0];

        let defense = Math.round((1.1 * defVIT) + (1.1 * defSTR));
        //console.log(defense);

        return defense; 

    } else if (firstRace == 'Mage' || secondRace == 'Mage') {

        let defMAG = arraySTATS[4];
        let defSPE = arraySTATS[1];

        let defense = Math.round((0.8 * defMAG) + (0.3 * defSPE));
        //console.log(defense);

        return defense;

    } else {

        console.log('La defensa son los padres');

    }
}


function getHealthPoints(arraySTATS) {

if (firstRace == 'Human' || secondRace == 'Human') {

    let heaSTR = arraySTATS[0];
    let heaVIT = arraySTATS[2];

    let health = heaSTR + heaVIT + 10;
    //console.log(defense);

    return health;

} else if (firstRace == 'Elven' || secondRace == 'Elven') {

    let heaSTR = arraySTATS[0];
    let heaDEX = arraySTATS[3];

    let health = heaSTR + heaDEX + 5;
    //console.log(defense);

    return health;

} else if (firstRace == 'Dwarf' || secondRace == 'Dwarf') {

    let heaSTR = arraySTATS[0];
    let heaVIT = arraySTATS[2];

    let health = heaSTR + heaDEX + 15;
    //console.log(defense);

    return health; 

} else if (firstRace == 'Mage' || secondRace == 'Mage') {

    let heaMAG = arraySTATS[4];
    let heaVIT = arraySTATS[2];

    let health = heaMAG + heaVIT + 3;
    //console.log(defense);

    return health;

} else {

    console.log('No tienes vida, literal');

}
}


function simulateBattle(arraySTATS,race) {

    // Primer personaje
    let stat1 = getDamages(arraySTATS);
    let stat2 = getDefense(arraySTATS);
    let stat3 = getHealthPoints(arraySTATS);
    let stat4 = arraySTATS[1];

    let firstCharacterStats = [stat1,stat2,stat3,stat4];

    console.log(firstRace,'\n',"- Ataque:",firstCharacterStats[0],'\n',"- Defensa:",firstCharacterStats[1],'\n',"- Puntos de Vida:",firstCharacterStats[2],'\n',"- Velocidad:",firstCharacterStats[3]);

    // Segundo personaje
    var secondCharacter = createRPGCharacter(race);

    let stat1B = getDamages(secondCharacter);
    let stat2B = getDefense(secondCharacter);
    let stat3B = getHealthPoints(secondCharacter);
    let stat4B = secondCharacter[1];

    let secondCharacterStats = [stat1B,stat2B,stat3B,stat4B];

    console.log(secondRace,'\n',"- Ataque:",secondCharacterStats[0],'\n',"- Defensa:",secondCharacterStats[1],'\n',"- Puntos de Vida:",secondCharacterStats[2],'\n',"- Velocidad:",secondCharacterStats[3]);

    // Combate
    let firstVida = firstCharacterStats[2];
    let secondVida = secondCharacterStats[2];

    if (firstCharacterStats[3] > secondCharacterStats[3]) {
        do {
            firstDamage = firstCharacterStats[0] - secondCharacterStats[1];
            secondVida = secondVida - firstDamage;

            if (secondVida > 0) {
                console.log("El segundo jugador ataca (",secondDamage,"de daño )");
                console.log("El segundo jugador posee",secondVida,"de vida restante");
            } else {
                console.log("El segundo jugador ataca (",secondDamage,"de daño )");
                console.log("La vida del segundo jugador ha llegado a 0. \nEl primer jugador gana.");
                break;
            }

            secondDamage = secondCharacterStats[0] - firstCharacterStats[1];
            firstVida = firstVida - secondDamage;

            if (firstVida > 0) {
                console.log("El primer jugador ataca (",firstDamage,"de daño )");
                console.log("El primer jugador posee",firstVida,"de vida restante");
            } else {
                console.log("El primer jugador ataca (",firstDamage,"de daño )");
                console.log("La vida del primer jugador ha llegado a 0. \nEl segundo jugador gana.");
                break;
            }
        }
        while (firstVida > 0 || secondVida > 0);
        
    } else {
        do {
            secondDamage = secondCharacterStats[0] - firstCharacterStats[1];
            firstVida = firstVida - secondDamage;

            if (firstVida > 0) {
                console.log("El segundo jugador ataca (",secondDamage,"de daño )");
                console.log("El primer jugador posee",firstVida,"de vida restante");
            } else {
                console.log("El segundo jugador ataca (",secondDamage,"de daño )");
                console.log("La vida del primer jugador ha llegado a 0. \nEl segundo jugador gana.");
                break;
            }

            firstDamage = firstCharacterStats[0] - secondCharacterStats[1];
            secondVida = secondVida - firstDamage;

            if (secondVida > 0) {
                console.log("El primer jugador ataca (",firstDamage,"de daño )");
                console.log("El segundo jugador posee",secondVida,"de vida restante");
            } else {
                console.log("El primer jugador ataca (",firstDamage,"de daño )");
                console.log("La vida del segundo jugador ha llegado a 0. \nEl primer jugador gana.");
                break;
            }
        }
        while (firstVida > 0 || secondVida > 0);

    }

    

    




}





</script>   

</body>
</html>